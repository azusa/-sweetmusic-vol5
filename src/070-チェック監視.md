# チェック監視について

あああ..

## ログの監視



## check-httpプラグインによる死活監視

```
[plugin.checks.jira]
command = "check-http -u http://localhost:8080/"
check_interval = 3
action = { command="/usr/local/bin/restart-jira.sh" }
```

```
#!/bin/bash

if [ -z $MACKEREL_STATUS ]; then
  exit 0
fi

if [ -z $MACKEREL_PREVIOUS_STATUS ]; then
  exit 0
fi


set -ux
set +e


if [ $MACKEREL_PREVIOUS_STATUS = "CRITICAL" -a $MACKEREL_STATUS = "CRITICAL" ]; then
  PID=$(ps aux |grep java |grep Bootstrap |grep jira |awk '{print $2}')
  kill -9 $PID
  systemctl start jira
fi
```

## チェック監視の復旧報
