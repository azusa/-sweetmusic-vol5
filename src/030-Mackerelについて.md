
\lhead[]{}
\rhead[]{}
\chead[Mackerelについて]{Mackerelについて}

# Mackerelについて

「Mackerel」は、株式会社はてなが提供する、
サーバー監視サービスです。

ユーザーインターフェースはWeb上で提供されており、
https://mackerel.io からアクセスすることができます。

Mackerelとは魚の「鯖」を指す英単語です。サービス名称としての「Mackerel」は、「サーバー」のことを指して「鯖」と俗称するという日本のIT業界の風習にちなんでいます。 ^[はてなの開発現場をForkwell Jobsのおおかゆかさんが探る！ “エンジニアの価値”を上げるインタビューとは - はてなニュース　[http://hatenanews.com/articles/201412/23091](http://hatenanews.com/articles/201412/23091)]

Mackerelは直感的な設定が可能なユーザーインタフェースを最たる特徴とします。

それに加えて、筆者はMackerelを使用するうえでサービスを特徴付けるポイントとして、以下の三点を挙げます。導入の容易さ、プラグイン開発の容易さ、課金体系の三点です。

## 導入の容易さ

Mackerelは監視対象となるホストにmackerel-agentというエージェントを導入することによってセットアップします。セットアップは、ホスト上でワンライナーを実行することで行うことができます。

このワンライナーのスクリプトの実行が完了した時点で、CPU使用率など、ホストに対する基本的な項目の監視が行えるようになっています。

## プラグイン開発の容易さ

Mackerelではプラグインを導入することにより、ミドルウェアや○○向けの監視項目を追加することができます。

また、プラグインを開発することによる、自らのニーズに応じたカスタムメトリックやチェック監視の項目追加することができます。この際、実行するコマンドの返り値と標準出力を用いてメトリックの送信を行うので、特定のプログラミング言語によらずにプラグインの開発を行う事ができます。


## 課金体系

草の根での普及を行いやすい


## 用語について

Mackerelの導入方法については「Mackerel サーバ監視［実践］入門」[@Inoue2017] にも記述がありますが、本著においても記述を理解するために必要な範囲についても次の章で説明を行います。

ここでは、Mackerelを特徴づける概念をあらわす用語とその意味について、
説明を行います。

- オーガニゼーション

Mackerelにアカウントを所有するユーザーはサービス全体で一つのアカウントを使用します。

Mackerelでは監視を行う対象の単位として「オーガニゼーション」という
ものがあり、Mackerelのユーザーはこのオーガニゼーションに所属することになります。

またユーザーは、複数のオーガニゼーションに所属することが可能です。

Mackerelでは通常は組織単位ではなく、ITサービスやシステムの単位でオーガニゼーションを構成します。これは、業務委託先に所属するユーザーや、エンドユーザーなど、
運営主体と異なる組織のユーザーをオーガニゼーションに参加可能にするためです。

- ホストとエージェント

Mackerelでは監視対象となるホストにmackerel-agentと呼ばれるエージェントをインストールし、そのエージェントがmackerelのサービスを提供するサーバーと通信を行う事でメトリクスの収集を行います。

Mackerelでは、一ヶ月でのアクティブ ^[通常、mackerel-agentの起動数] なホスト数の移動平均でホスト数を算出し、 ^[[https://mackerel.io/ja/docs/entry/faq/contracts/calculate-host-number](https://mackerel.io/ja/docs/entry/faq/contracts/calculate-host-number)]、算出したホスト数が課金の単位となります。

また、プランごとの各種項目数がプラン上限を超えている場合、ホスト数として換算して課金を行います。^[[https://mackerel.io/ja/docs/entry/faq/contracts/limit-exceeded-conversion](https://mackerel.io/ja/docs/entry/faq/contracts/limit-exceeded-conversion)]

なお課金プランの詳細については、サービス運営元にお問い合わせください。

- メトリック

mackerel-agentが収集するホストの様々なホストの状況をメトリックと呼びます。メトリクス
とも呼ばれますが、Mackerelのサービスにおいてはメトリックと呼ばれるため、本稿でもメトリックという呼び方で統一します。^[[https://mackerel.io/ja/docs/entry/glossary](https://mackerel.io/ja/docs/entry/glossary)]

- サービス

